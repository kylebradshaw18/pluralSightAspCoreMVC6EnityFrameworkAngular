!function(){"use strict";function t(t,o){function n(){a.newStop={},a.newStop.arrival=(new Date).toLocaleDateString()}const r="/api/trips/";var a=this;a.tripName=t.tripName,a.stops=[],a.errorMessage="",a.newStop={},a.newStop.arrival=(new Date).toLocaleDateString(),a.isBusy=!1,a.newStop={},o.get(r+a.tripName+"/stops").then(function(t){angular.copy(t.data,a.stops),e(a.stops)},function(t){a.errorMessage=t}).finally(function(){a.isBusy=!1}),a.addStop=function(){a.isBusy=!0,a.errorMessage="","[object Date]"===Object.prototype.toString.call(a.newStop.arrival)&&isNaN(a.newStop.arrival.getTime())&&(a.errorMessage="Invalid Date"),a.errorMessage.length>0||o.post(r+a.tripName+"/stops",a.newStop).then(function(t){a.stops.push(t.data),e(a.stops),n()},function(t){a.errorMessage=t}).finally(function(){a.isBusy=!1})}}function e(t){if(t&&t.length>0){var e=_.map(t,function(t){return{lat:t.latitude,long:t.longitude,info:t.name}});travelMap.createMap({stops:e,selector:"#map",currentStop:1,initialZoom:3})}}t.$inject=["$routeParams","$http"],angular.module("tripsApp").controller("tripEditorController",t)}();